var idBookForUpdate,idEmployeeForUpdate,encodedFiel,strCaptcha,intChaptcha,statusUser,statusAdmin,userIdRenting,getEncodephoto,idEditIssue,getEncodeImg="",login_constant="";function unixtimetodate(e){var t=e;return moment.unix(t).format("DD.MM.YYYY")}function unixtimetodateDateBirth(e){var t=e;return moment.unix(t).format("YYYY-MM-DD")}function date2timestamp(e,t,o,n,l,d){return Date.UTC(e,t-1,o,n,l,d)/1e3}function showPanelUpdateAdditionalInfo(){document.getElementById("discriptionUpdate").style.display="block",document.getElementById("loadImg").style.display="block",document.getElementById("savePanelAdditionalInfoBook").style.display="block",document.getElementById("panelAdditionalInfoBook").style.height="500px",document.getElementById("closePanelAdditionalInfoBook").style.top="462px",document.getElementById("discriptionUpdate").value=document.getElementById("discriptionBook").innerHTML}function viewBookInfo(){var e=event.target.id,t=(e.split("-")[0],e.split("-")[1]);document.getElementById("savePanelAdditionalInfoBook").setAttribute("idRow",t);var o={action:"rating",idBook:t};$.ajax({url:urlServerBook,dataType:"json",data:o,error:function(e){},success:function(e){var t=JSON.parse(JSON.stringify(e)),o=t[0].rating;0!=t.length?document.getElementById("countRatin").innerHTML=o:document.getElementById("countRatin").innerHTML="0,00"}});var n={action:"additionalInfo",idBook:t};$.ajax({url:urlServerBook,dataType:"json",data:n,error:function(e){},success:function(e){var t=JSON.parse(JSON.stringify(e)),o=t[0].nameImgBook,n=t[0].discriptionBook;0!=t.length?(document.getElementById("photoBook").src=o,document.getElementById("discriptionBook").innerHTML=n):(document.getElementById("photoBook").src=o,document.getElementById("discriptionBook").innerHTML="not information")}}),document.getElementById("panelAdditionalInfoBook").style.display="block"}function loadImageInput(){var e=document.getElementById("photoBook"),t=document.getElementById("loadImg").files[0],o=new FileReader;o.onloadend=function(){e.src=o.result,getEncodeImg=o.result},t?o.readAsDataURL(t):e.src=""}function savePanelAdditionalInfoBook(){var e=document.getElementById("savePanelAdditionalInfoBook").getAttribute("idRow"),t=document.getElementById("discriptionUpdate").value,o=document.getElementById("loadImg").value,n=(document.getElementById("discriptionUpdate").src,{action:"updateAdditionalInformation",idBook:e,discriptionBook:t,nameImageBook:o,imgEnCode:getEncodeImg});$.ajax({url:urlServerBook,type:"POST",dataType:"json",data:n,error:function(e){},success:function(e){}}),showInformationPanel("The additional information of the book has been saved."),document.getElementById("discriptionUpdate").style.display="none",document.getElementById("loadImg").style.display="none",document.getElementById("savePanelAdditionalInfoBook").style.display="none",document.getElementById("panelAdditionalInfoBook").style.height="309px",document.getElementById("closePanelAdditionalInfoBook").style.top="273px",document.getElementById("panelAdditionalInfoBook").style.display="none"}function closePanelAdditionalInfoBook(){document.getElementById("discriptionUpdate").style.display="none",document.getElementById("loadImg").style.display="none",document.getElementById("savePanelAdditionalInfoBook").style.display="none",document.getElementById("panelAdditionalInfoBook").style.height="309px",document.getElementById("closePanelAdditionalInfoBook").style.top="273px",document.getElementById("panelAdditionalInfoBook").style.display="none",showInformationPanel("The additional information of the book hasn't been saved.")}function getIdElementClickEmployeeEdit(){var e=event.target.id,t=(e.split("-")[0],e.split("-")[1]);document.getElementById("lblStatus").innerHTML="status: editing employee";var o=t;idEmployeeForUpdate=t,$.ajax({url:urlServerEmployee,dataType:"json",data:{action:"s",text:o},error:function(e){},success:function(e){var t=JSON.parse(JSON.stringify(e)),o=(Object.keys(t[0]).length,t[0].name),n=t[0].dateBirth,l=t[0].email;document.getElementById("fieldName").value=o;var d=unixtimetodateDateBirth(n);document.getElementById("selectDateBirth").value=d,document.getElementById("selectEmail").value=l}}),document.getElementById("blockEditAddEmployee").style.display="block"}function getElementIdClickBookEdit(){var e=event.target.id,t=(e.split("-")[0],e.split("-")[1]);document.getElementById("lblStatus").innerHTML="status: editing";var o=t;idBookForUpdate=t,$.ajax({url:urlServerBook,dataType:"json",data:{action:"selectBookId",text:o},error:function(e){},success:function(e){var t=JSON.parse(JSON.stringify(e)),o=(Object.keys(t[0]).length,t[0].brief),n=t[0].publishYear,l=t[0].author;document.getElementById("fieldBrief").value=o,document.getElementById("selectPublisYear").value=n,document.getElementById("selectAuthor").value=l}}),document.getElementById("blockEditAdd").style.display="block"}function deleeEmployById(){var e=event.target.id,t=(e.split("-")[0],e.split("-")[1]),o={action:"deleteEmployee",id:t};$.ajax({url:urlServerEmployee,dataType:"json",data:o,error:function(e){document.getElementById("respServlet").innerHTML="",getListEmployee(),setTimeout(getListBook(),500)},success:function(e){document.getElementById("respServlet").innerHTML="",getListEmployee(),setTimeout(getListBook(),500)}}),showInformationPanel("Employee ID:"+t+" was deleted."),document.getElementById("respServlet").innerHTML="",getListEmployee(),setTimeout(getListBook(),500)}function deleebookById(){var e=event.target.id,t=(e.split("-")[0],e.split("-")[1]),o={action:"deleteBook",id:t};$.ajax({url:urlServerBook,dataType:"json",data:o,error:function(e){document.getElementById("respServlet").innerHTML="",getListBook(),setTimeout(getListBook(),500)},success:function(e){document.getElementById("respServlet").innerHTML="",getListBook(),setTimeout(getListBook(),500)}}),document.getElementById("respServlet").innerHTML="",getListBook(),setTimeout(getListBook(),500),showInformationPanel("Book ID:"+t+" was deleted.")}function getListBook(){loadWorkPanelHide(),loadBookPanel(),document.getElementById("addDtn").style.display="block",$.ajax({url:urlServerBook,dataType:"json",data:{action:"readAllBooks"},error:function(e){},success:function(e){document.getElementById("blockTable").innerHTML="List of books.";var t=JSON.parse(JSON.stringify(e)),o=Object.keys(t.books).length;document.getElementById("respServlet").innerHTML="";for(var n="",l=0;l<o;l++){$("#autiorList").append('<option value="'+t.books[l].author+'" selected="selected">'+t.books[l].author+"</option>");var d=d+t.books[l].brief;n=(n=(n=(n=(n=(n=(n=n+'<tr><td style="text-align: right;">'+t.books[l].id+"</td>")+"<td>"+t.books[l].brief+"</td>")+'<td style="text-align: right;">'+t.books[l].publishYear+"</td>")+"<td>"+t.books[l].author+"</td>")+'<td style="width: 50px"><button id=viewBtn-'+t.books[l].id+' onClick="viewBookInfo();" class="viewBtnRow">view</button></td>')+'<td style="width: 50px"><button id=editBtn-'+t.books[l].id+' onClick="getElementIdClickBookEdit();" class="editBtnRow">edit</button></td>')+'<td style="width: 50px"><button id=deleteBtn-'+t.books[l].id+' onClick="deleebookById();" class="deleteBtnRow">delete</button></td>'}var a='<table id="tabResponse" class="tabResponse"><tr><td style="text-align: center; background: #39b54a; color: #fff">Id</td><td style="text-align: center;  background: #39b54a;  color: #fff">Brief</td><td style="text-align: center;  background: #39b54a;  color: #fff; width: 100px;">Publish year</td><td style="text-align: center;  background: #39b54a;  color: #fff">Author</td><td  style="text-align: center;  background: #39b54a;  color: #fff" colspan="3" >Action</td></tr><tr>'+n+"</tr></table>";document.getElementById("respServlet").innerHTML=a}})}function saveBook(){if("status: adding"==document.getElementById("lblStatus").innerHTML){var e={action:"createBook",brief:document.getElementById("fieldBrief").value,publisher:document.getElementById("selectPublisYear").value,author:document.getElementById("selectAuthor").value};$.ajax({url:urlServerBook,dataType:"json",data:e,error:function(e){document.getElementById("blockEditAdd").style.display="none",getListBook()},success:function(e){document.getElementById("blockEditAdd").style.display="none",getListBook()}}),document.getElementById("blockEditAdd").style.display="none",getListBook(),showInformationPanel("The book list has been saved.")}else{var t={action:"updateBook",id:idBookForUpdate,brief:document.getElementById("fieldBrief").value,publisher:document.getElementById("selectPublisYear").value,author:document.getElementById("selectAuthor").value};$.ajax({url:urlServerBook,dataType:"json",data:t,error:function(e){document.getElementById("blockEditAdd").style.display="none",getListBook()},success:function(e){document.getElementById("blockEditAdd").style.display="none",getListBook()}}),document.getElementById("blockEditAdd").style.display="none",getListBook(),showInformationPanel("The book list has been saved.")}}function saveEmployee(){if("status: adding employee"==document.getElementById("lblStatusEmployee").innerHTML){var e={action:"createEmployee",name:document.getElementById("fieldName").value,birthDay:date2timestamp((t=document.getElementById("selectDateBirth").value).split("-")[0],t.split("-")[1],t.split("-")[2],0,0,0),email:document.getElementById("selectEmail").value};$.ajax({url:urlServerEmployee,dataType:"json",data:e,error:function(e){document.getElementById("blockEditAddEmployee").style.display="none",getListEmployee()},success:function(e){document.getElementById("blockEditAddEmployee").style.display="none",getListEmployee()}}),document.getElementById("blockEditAddEmployee").style.display="none",getListEmployee(),showInformationPanel("The employee list has been saved.")}else{var t,o={action:"readAllBooks",id:idEmployeeForUpdate,name:document.getElementById("fieldName").value,birthDay:date2timestamp((t=document.getElementById("selectDateBirth").value).split("-")[0],t.split("-")[1],t.split("-")[2],0,0,0),email:document.getElementById("selectEmail").value};$.ajax({url:urlServerBook,dataType:"json",data:o,error:function(e){document.getElementById("blockEditAddEmployee").style.display="none",getListEmployee()},success:function(e){document.getElementById("blockEditAddEmployee").style.display="none",getListEmployee()}}),document.getElementById("blockEditAddEmployee").style.display="none",getListEmployee(),showInformationPanel("The employee list has been saved.")}}function hideRegPanelSave(){switch(document.getElementById("blockTable").innerHTML){case"List of books.":saveBook();break;case"List of employes.":saveEmployee()}}function AddNew(){document.getElementById("fieldBrief").value="",document.getElementById("selectPublisYear").value="",document.getElementById("selectAuthor").value="",document.getElementById("lblStatus").innerHTML="status: adding",document.getElementById("blockEditAdd").style.display="block"}function hideRegPanelCancel(){switch(document.getElementById("blockTable").innerHTML){case"List of books.":document.getElementById("blockEditAdd").style.display="none",showInformationPanel("Editing the book has been canceled.");break;case"List of employes.":document.getElementById("blockEditAddEmployee").style.display="none",showInformationPanel("Editing the employee has been canceled.")}}function buildReportOfEployee(){var e=document.getElementById("findField").value;$.ajax({url:urlServerEmployee,dataType:"json",data:{action:"createXLSEmployee",text:e},error:function(e){showInformationPanel("The employee list hasn't been saved.")},success:function(e){showInformationPanel("The employee list has been saved.")}})}function buildReportOfBook(){var e=document.getElementById("findField").value;$.ajax({url:urlServerBook,dataType:"json",data:{action:"createXLSBook",text:e},error:function(e){showInformationPanel("The book list hasn't been saved.")},success:function(e){showInformationPanel("The book list has been saved.")}})}function reportBook(){switch(document.getElementById("blockTable").innerHTML){case"List of books.":buildReportOfBook();break;case"List of employes.":buildReportOfEployee()}}function clearSearchField(){switch(document.getElementById("findField").value="",document.getElementById("blockTable").innerHTML){case"List of books.":document.getElementById("helloLbl").innerHTML;"false"==statusAdmin?$.ajax({url:urlServerBook,dataType:"json",data:{action:"readAllBooks"},error:function(e){},success:function(e){document.getElementById("blockTable").innerHTML="List of books.";var t=JSON.parse(JSON.stringify(e)),o=Object.keys(t.books).length;document.getElementById("respServlet").innerHTML="";for(var n="",l=0;l<o;l++){var d=d+t.books[l].brief;n=(n=(n=(n=(n=(n=n+'<tr><td style="text-align: right;">'+t.books[l].id+"</td>")+"<td>"+t.books[l].brief+"</td>")+'<td style="text-align: right;">'+t.books[l].publishYear+"</td>")+"<td>"+t.books[l].author+"</td>")+'<td style="width: 50px"><button id=viewBtn-'+t.books[l].id+' onClick="viewBookInfo();" class="viewBtnRow">view</button></td>')+'<td style="width: 50px"><button id=viewBtn-'+t.books[l].id+"-"+userIdRenting+' onClick="createRenting();" class="viewBtnRow">rent</button></td>'}var a='<table id="tabResponse" class="tabResponse"><tr><td style="text-align: center; background: #39b54a; color: #fff">Id</td><td style="text-align: center;  background: #39b54a;  color: #fff">Brief</td><td style="text-align: center;  background: #39b54a;  color: #fff; width: 100px;">Publish year</td><td style="text-align: center;  background: #39b54a;  color: #fff">Author</td><td style="text-align: center;  background: #39b54a;  color: #fff">View</td><td style="text-align: center;  background: #39b54a;  color: #fff">Rent</td>'+n+"</tr></table>";document.getElementById("respServlet").innerHTML=a}}):(document.getElementById("findField").value="",getListBook());break;case"List of employes.":document.getElementById("findField").value="",getListEmployee(),document.getElementById("addDtn").style.display="none"}}function getFilterListBook(e){switch(document.getElementById("blockTable").innerHTML){case"List of books.":if("Hello, admin."!=document.getElementById("helloLbl").innerHTML){var t=e;$.ajax({url:urlServerBook,dataType:"json",data:{action:"findBook",text:t},error:function(e){},success:function(e){document.getElementById("blockTable").innerHTML="List of books.";var t=JSON.parse(JSON.stringify(e)),o=Object.keys(t.books).length;document.getElementById("respServlet").innerHTML="";for(var n="",l=0;l<o;l++){var d=d+t.books[l].brief;n=(n=(n=(n=(n=(n=n+'<tr><td style="text-align: right;">'+t.books[l].id+"</td>")+"<td>"+t.books[l].brief+"</td>")+'<td style="text-align: right;">'+t.books[l].publishYear+"</td>")+"<td>"+t.books[l].author+"</td>")+'<td style="width: 50px"><button id=viewBtn-'+t.books[l].id+' onClick="viewBookInfo();" class="viewBtnRow">view</button></td>')+'<td style="width: 50px"><button id=viewBtn-'+t.books[l].id+"-"+userIdRenting+' onClick="createRenting();" class="viewBtnRow">rent</button></td>'}var a='<table id="tabResponse" class="tabResponse"><tr><td style="text-align: center; background: #39b54a; color: #fff">Id</td><td style="text-align: center;  background: #39b54a;  color: #fff">Brief</td><td style="text-align: center;  background: #39b54a;  color: #fff; width: 100px;">Publish year</td><td style="text-align: center;  background: #39b54a;  color: #fff">Author</td><td style="text-align: center;  background: #39b54a;  color: #fff">View</td><td style="text-align: center;  background: #39b54a;  color: #fff">Rent</td>'+n+"</tr></table>";document.getElementById("respServlet").innerHTML=a}})}else{t=e;$.ajax({url:urlServerBook,dataType:"json",data:{action:"findBook",text:t},error:function(e){},success:function(e){document.getElementById("blockTable").innerHTML="List of books.";var t=JSON.parse(JSON.stringify(e)),o=Object.keys(t.books).length;document.getElementById("respServlet").innerHTML="";for(var n="",l=0;l<o;l++){$("#autiorList").append('<option value="'+t.books[l].author+'" selected="selected">'+t.books[l].author+"</option>");var d=d+t.books[l].brief;n=(n=(n=(n=(n=(n=(n=n+'<tr><td style="text-align: right;">'+t.books[l].id+"</td>")+"<td>"+t.books[l].brief+"</td>")+'<td style="text-align: right;">'+t.books[l].publishYear+"</td>")+"<td>"+t.books[l].author+"</td>")+'<td style="width: 50px"><button id=viewBtn-'+t.books[l].id+' onClick="viewBookInfo();" class="viewBtnRow">view</button></td>')+'<td style="width: 50px"><button id=editBtn-'+t.books[l].id+' onClick="getElementIdClickBookEdit();" class="editBtnRow">edit</button></td>')+'<td style="width: 50px"><button id=deleteBtn-'+t.books[l].id+' onClick="deleebookById();" class="deleteBtnRow">delete</button></td>'}var a='<table id="tabResponse" class="tabResponse"><tr><td style="text-align: center; background: #39b54a; color: #fff">Id</td><td style="text-align: center;  background: #39b54a;  color: #fff">Brief</td><td style="text-align: center;  background: #39b54a;  color: #fff; width: 100px;">Publish year</td><td style="text-align: center;  background: #39b54a;  color: #fff">Author</td><td  style="text-align: center;  background: #39b54a;  color: #fff" colspan="3" >Action</td></tr><tr>'+n+"</tr></table>";document.getElementById("respServlet").innerHTML=a}})}break;case"List of employes.":t=e;$.ajax({url:urlServerEmployee,dataType:"json",data:{action:"findEmployee",text:t},error:function(e){},success:function(e){document.getElementById("blockTable").innerHTML="List of employes.";var t=JSON.parse(JSON.stringify(e)),o=Object.keys(t.employee).length;document.getElementById("respServlet").innerHTML="";for(var n="",l=0;l<o;l++){var d=t.employee[l].dateBirth,a=unixtimetodate(d);n=(n=(n=(n=(n=n+'<tr><td style="text-align: right;">'+t.employee[l].id+"</td>")+"<td>"+t.employee[l].name+"</td>")+'<td style="text-align: right;">'+a+"</td>")+"<td>"+t.employee[l].email+"</td>")+'<td style="width: 50px"><button id=deleteBtn-'+t.employee[l].id+' onClick="deleeEmployById();" class="deleteBtnRow">delete</button></td>'}var i='<table id="tabResponse" class="tabResponse"><tr><td style="text-align: center; background: #39b54a; width: 50px; color: #fff">Id</td><td style="text-align: center;  background: #39b54a;  color: #fff">Name</td><td style="text-align: center;  background: #39b54a;  color: #fff; width: 90px;">Date of birth</td><td style="text-align: center;  background: #39b54a; width: 250px; color: #fff">Email</td><td  style="text-align: center;  background: #39b54a;  color: #fff" colspan="3" >Action</td></tr><tr>'+n+"</tr></table>";document.getElementById("respServlet").innerHTML=i}})}}function autoEntrance(){document.getElementById("userField").value,document.getElementById("passField").value;var e=document.getElementById("enterButton");try{document.getElementById("userField").value=readCookie("strLoggin"),document.getElementById("passField").value=readCookie("strPassword"),e.click()}catch(e){}}function readCookie(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var l=o[n];" "==l.charAt(0);)l=l.substring(1,l.length);if(0==l.indexOf(t))return l.substring(t.length,l.length)}return null}function showPasswordInField(){element=document.getElementById("passField"),"password"==element.type?element.type="text":element.type="password"}function validateInputLogin(){var e=document.getElementById("inputLoginRegistrationForm").value;/[a-zA-Z]/.test(e)?(document.getElementById("inputLoginRegistrationForm").style.background="#fff",document.getElementById("labelLoginRegistrationForm").innerHTML="Login:",document.getElementById("saveButtonRegistrationForm").removeAttribute("disabled"),document.getElementById("saveButtonRegistrationForm").style.background="rgb(41, 129, 202)"):(document.getElementById("inputLoginRegistrationForm").style.background="#ffad99",document.getElementById("labelLoginRegistrationForm").innerHTML="Login: (оnly English letters) ",document.getElementById("saveButtonRegistrationForm").setAttribute("disabled","disabled"),document.getElementById("saveButtonRegistrationForm").style.background="rgb(186, 190, 193)")}function validateInputPassword(){var e=document.getElementById("inputPasswordRegistrationForm").value;/[a-zA-Z]/.test(e)?(document.getElementById("inputPasswordRegistrationForm").style.background="#fff",document.getElementById("labelPasswordRegistrationForm").innerHTML="Password:",document.getElementById("saveButtonRegistrationForm").removeAttribute("disabled"),document.getElementById("saveButtonRegistrationForm").style.background="rgb(41, 129, 202)"):(document.getElementById("inputPasswordRegistrationForm").style.background="#ffad99",document.getElementById("labelPasswordRegistrationForm").innerHTML="Password: (оnly English letters) ",document.getElementById("saveButtonRegistrationForm").setAttribute("disabled","disabled"),document.getElementById("saveButtonRegistrationForm").style.background="rgb(186, 190, 193)")}function validateInputEmail(){var e=document.getElementById("inputEmailRegistrationForm").value;/^[-._a-z0-9]+@(?:[a-z0-9][-a-z0-9]+\.)+[a-z]{2,6}$/.test(e)?(document.getElementById("inputEmailRegistrationForm").style.background="#fff",document.getElementById("labelEmailRegistrationForm").innerHTML="Email:",document.getElementById("saveButtonRegistrationForm").removeAttribute("disabled"),document.getElementById("saveButtonRegistrationForm").style.background="rgb(41, 129, 202)"):(document.getElementById("inputEmailRegistrationForm").style.background="#ffad99",document.getElementById("labelEmailRegistrationForm").innerHTML="Email: (incorrect email) ",document.getElementById("saveButtonRegistrationForm").setAttribute("disabled","disabled"),document.getElementById("saveButtonRegistrationForm").style.background="rgb(186, 190, 193)")}function validateInputDate(){var e=document.getElementById("inputDateBirthRegistrationForm").value,t=date2timestamp(e.split("-")[0],e.split("-")[1],e.split("-")[2],0,0,0);isNaN(t)?(document.getElementById("inputDateBirthRegistrationForm").style.background="#ffad99",document.getElementById("saveButtonRegistrationForm").setAttribute("disabled","disabled"),document.getElementById("saveButtonRegistrationForm").style.background="rgb(186, 190, 193)"):(document.getElementById("inputDateBirthRegistrationForm").style.background="#fff",document.getElementById("saveButtonRegistrationForm").removeAttribute("disabled"),document.getElementById("saveButtonRegistrationForm").style.background="rgb(41, 129, 202)")}function hideInformationPanel(){document.getElementById("alertPanel").style.display="none"}function showInformationPanel(e){var t=e;document.getElementById("alertPanel").style.display="block",document.getElementById("alertLblPanel").innerHTML=t,setTimeout(function(){hideInformationPanel()},3e3)}function loadPanelControl(){document.getElementById("tablesPanel").style.display="none"}function loadWorkPanelHide(){document.getElementById("tablesPanelControl").style.display="none"}function loadWorkPanel(){document.getElementById("tablesPanel").style.display="none",document.getElementById("tablesPanelControl").style.display="block",loadRegistrationBook(),loadEmployeeIformation(),loadBookIformation()}function loadBookPanel(){document.getElementById("tablesPanel").style.display="block"}function loadEmployeePanel(){document.getElementById("tablesPanel").style.display="block"}function showPanelListRentingPanel(){document.getElementById("panelRentingList").style.display="block"}function hideListRentinPanel(){document.getElementById("panelRentingList").style.display="none"}function getListRenting(){$.ajax({url:urlServerBook,dataType:"json",data:{action:"readAllRent"},error:function(e){},success:function(e){var t=JSON.parse(JSON.stringify(e)),o=Object.keys(t.allRentBooks).length,n=document.getElementById("lblCountRent");n.innerHTML="",n.innerHTML=o;for(var l="",d=0;d<o;d++)l=(l=(l=(l=(l=(l=(l=l+'<tr><td style="text-align: right;">'+t.allRentBooks[d].idRent+"</td>")+'<td style="text-align: right;">'+unixtimetodate(t.allRentBooks[d].dateOnRenting)+"</td>")+'<td style="text-align: left;">'+t.allRentBooks[d].nameEmployee+"</td>")+'<td style="text-align: left;">'+t.allRentBooks[d].emailEmployee+"</td>")+'<td style="text-align: left;">'+t.allRentBooks[d].nameBook+"</td>")+'<td style="width: 50px"><button id=YesRent-'+t.allRentBooks[d].idRent+' onClick="" class="editBtnRow">Yes</button></td>')+'<td style="width: 50px"><button id=NoRent-'+t.allRentBooks[d].idRent+"-"+t.allRentBooks[d].emailEmployee+"-"+t.allRentBooks[d].dateOnRenting+"-"+t.allRentBooks[d].nameBook+'- onClick="noAnswerRenting();" class="deleteBtnRow">No</button></td>';var a='<table id="tabResponse" class="tabResponse"><tr><td style="text-align: center; background: #39b54a; color: #fff;">Id</td><td style="text-align: center; background: #39b54a; color: #fff;">Date</td><td style="text-align: center; background: #39b54a; color: #fff;">Employee</td><td style="text-align: center; background: #39b54a; color: #fff;">Email</td><td style="text-align: center; background: #39b54a; color: #fff;">Book</td><td style="text-align: center; background: #39b54a; color: #fff;" colspan="3" >Action</td></tr><tr>'+l+"</tr></table>";document.getElementById("tablePanelRentingList").innerHTML=a}});try{showPanelListRentingPanel()}catch(e){}}function noAnswerRenting(){var e=event.target.id,t=(e.split("-")[0],{action:"answerRenting",idRenting:e.split("-")[1],emailEmployee:e.split("-")[2],dateOnEmployee:e.split("-")[3],bookName:e.split("-")[4]});$.ajax({url:urlServerBookEmployee,dataType:"json",data:t,error:function(e){showInformationPanel("A letter about the book order information was sent."),getListRenting()},success:function(e){showInformationPanel("A letter about the book order information was sent."),getListRenting()}}),getListRenting()}function loadRegistrationBook(){$.ajax({url:urlServerBook,dataType:"json",data:{action:"issueBookReport"},error:function(e){},success:function(e){document.getElementById("panelTableRegistrationBook").innerHTML=m;for(var t=JSON.parse(JSON.stringify(e)),o=Object.keys(t.issueBook).length,n="",l=0;l<o;l++){var d=l+1,a=unixtimetodate(t.issueBook[l].dateOn);if(0==t.issueBook[l].dateOff)i="";else{var i=unixtimetodate(t.issueBook[l].dateOff);parseInt((i-a)/86400)}var s=Math.round((new Date).getTime()/1e3)-t.issueBook[l].dateOn,r=parseInt(s),c=parseInt(r/86400);n=(n=(n=(n=(n=(n=(n=(n=n+'<tr><td style="text-align: right; width: 50px;">'+d+"</td>")+'<td style="text-align: center; width: 10px;"><img src="img/'+t.issueBook[l].status+'.png" class="statusPng"></td>')+'<td style="text-align: right; width: 50px;">'+t.issueBook[l].idEmployee+"</td>")+"<td>"+t.issueBook[l].nameEmployee+"</td>")+'<td style="text-align: right; width: 50px;">'+t.issueBook[l].idBook+"</td>")+"<td>"+t.issueBook[l].nameBook+"</td>")+'<td style="text-align: center; width: 50px;">'+a+"</td>")+'<td style="text-align: center; width: 50px;">'+i+"</td>";t.issueBook[l].status;if(""!=i)n=(n=n+'<td style="text-align: center; width: 50px;">'+t.issueBook[l].countDay+"</td>")+'<td style="width: 50px"><button id=viewBtnEmployeeBook-'+t.issueBook[l].idIssue+' onClick="editRegistrationBook();" class="viewBtnEmployeeBook">view</button></td>',n+='<td style="width: 50px"></td>';else if(c>10){n=(n=n+'<td style="text-align: center; width: 50px; color: #fff; background-color: rgb(232, 95, 76);" class="garientCountDay">'+t.issueBook[l].countDay+"</td>")+'<td style="width: 50px"><button id=viewBtnEmployeeBook-'+t.issueBook[l].idIssue+' onClick="editRegistrationBook();" class="viewBtnEmployeeBook">view</button></td>';var u=i+"/"+(a=t.issueBook[l].dateOn)+"/"+t.issueBook[l].idBook+"/"+t.issueBook[l].idEmployee+"/"+t.issueBook[l].nameBook+"/"+t.issueBook[l].nameEmployee+"/"+t.issueBook[l].status;n=n+'<td style="width: 50px"><button id=emailBtnEmployeeBook-'+t.issueBook[l].idEmployee+' onClick="sendEmail();" value="'+u+'" class="emailBtnEmployeeBook">email</button></td>'}else c<10&&(n=(n=n+'<td style="text-align: center; width: 50px;">'+c+"</td>")+'<td style="width: 50px"><button id=viewBtnEmployeeBook-'+t.issueBook[l].idIssue+' onClick="editRegistrationBook();" class="viewBtnEmployeeBook">view</button></td>',n+='<td style="width: 50px"></td>')}var m='<table id="tabResponse" class="tableRegistration"><tr><td colspan="2" style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">*</td><td colspan="2" style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Employee</td><td colspan="2" style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Book</td><td colspan="3" style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Data registration</td><td colspan="2" style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Action</td></tr><tr><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">#</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">S</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Id</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Name</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Id</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Brief</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Issue</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Return</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Day</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">View</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Email</td></tr>'+n+"</tr></table>";document.getElementById("panelTableRegistrationBook").innerHTML=m}})}function sendEmail(){var e=event.target.id,t=(e.split("-")[0],e.split("-")[1],document.getElementById(e).value);$.ajax({url:urlServerServices,dataType:"json",data:{action:"sendEmail",value:t},error:function(e){},success:function(e){JSON.parse(JSON.stringify(e))}}),showInformationPanel("The letter was sent.")}function loadBookIformation(){$.ajax({url:urlServerBook,dataType:"json",data:{action:"readAllBooks"},error:function(e){},success:function(e){for(var t=JSON.parse(JSON.stringify(e)),o=Object.keys(t.books).length,n=0;n<o;n++)$("#bookRegPanel").append('<option value="'+t.books[n].brief+'" data-status="'+t.books[n].id+'" selected="selected">'+t.books[n].id+"</option>")}})}function loadEmployeeIformation(){$.ajax({url:urlServerEmployee,dataType:"json",data:{action:"readAllEmployee"},error:function(e){},success:function(e){for(var t=JSON.parse(JSON.stringify(e)),o=Object.keys(t.employee).length,n=0;n<o;n++)$("#employeeRegPanel").append('<option value="'+t.employee[n].name+'" data-status="'+t.employee[n].id+'" selected="selected">'+t.employee[n].id+"</option>")}})}function editRegistrationBook(){var e=event.target.id,t=(e.split("-")[0],e.split("-")[1]);document.getElementById("panelAddRegRegistration").style.display="block",document.getElementById("lblStatusRegRegistration").innerHTML="status: modified issue #"+t,idEditIssue=t,document.getElementById("selectEmployeeRegInput").setAttribute("readonly","readonly"),document.getElementById("selectBookRegInput").setAttribute("readonly","readonly"),document.getElementById("selectRegDateOn").setAttribute("readonly","readonly"),document.getElementById("selectRegDateOff").style.display="block",document.getElementById("dateOffRegBookLabel").style.display="block";var o={action:"issueBookFindRow",idIssue:t};$.ajax({url:urlServerBook,dataType:"json",data:o,error:function(e){loadRegistrationBook()},success:function(e){var t=JSON.parse(JSON.stringify(e));document.getElementById("selectEmployeeRegInput").value=t.issueBookFindRow[0].nameEmployee,document.getElementById("selectBookRegInput").value=t.issueBookFindRow[0].nameBook,document.getElementById("selectRegDateOn").value=unixtimetodateDateBirth(t.issueBookFindRow[0].dateOn);var o=t.issueBookFindRow[0].dateOff;document.getElementById("selectRegDateOff").value=unixtimetodateDateBirth(0==o?Math.round((new Date).getTime()/1e3):t.issueBookFindRow[0].dateOff),loadRegistrationBook()}})}function shoeAddRegistrationPanel(){var e=event.target.id;e.split("-")[0],e.split("-")[1];document.getElementById("panelAddRegRegistration").style.display="block",document.getElementById("lblStatusRegRegistration").innerHTML="status: new issue",document.getElementById("selectEmployeeRegInput").value="",document.getElementById("selectBookRegInput").value="",document.getElementById("selectEmployeeRegInput").removeAttribute("readonly"),document.getElementById("selectBookRegInput").removeAttribute("readonly"),document.getElementById("selectRegDateOn").removeAttribute("readonly"),document.getElementById("selectRegDateOff").style.display="none",document.getElementById("dateOffRegBookLabel").style.display="none"}function getFilterRegRegistration(e){var t={action:"filterIssue",text:e};$.ajax({url:urlServerBook,dataType:"json",data:t,error:function(e){},success:function(e){document.getElementById("panelTableRegistrationBook").innerHTML=u;for(var t=JSON.parse(JSON.stringify(e)),o=Object.keys(t.issueBookFilter).length,n="",l=0;l<o;l++){var d=unixtimetodate(t.issueBookFilter[l].dateOn);if(0==t.issueBookFilter[l].dateOff)a="";else{var a=unixtimetodate(t.issueBookFilter[l].dateOff);parseInt((a-d)/86400)}var i=Math.round((new Date).getTime()/1e3)-t.issueBookFilter[l].dateOn,s=parseInt(i),r=parseInt(s/86400);n=(n=(n=(n=(n=(n=(n=(n=n+'<tr><td style="text-align: right; width: 50px;">'+t.issueBookFilter[l].idIssue+"</td>")+'<td style="text-align: center; width: 10px;"><img src="img/'+t.issueBookFilter[l].status+'.png" class="statusPng"></td>')+'<td style="text-align: right; width: 50px;">'+t.issueBookFilter[l].idEmployee+"</td>")+"<td>"+t.issueBookFilter[l].nameEmployee+"</td>")+'<td style="text-align: right; width: 50px;">'+t.issueBookFilter[l].idBook+"</td>")+"<td>"+t.issueBookFilter[l].nameBook+"</td>")+'<td style="text-align: center; width: 50px;">'+d+"</td>")+'<td style="text-align: center; width: 50px;">'+a+"</td>";t.issueBookFilter[l].status;if(""!=a)n=(n=n+'<td style="text-align: center; width: 50px;">'+t.issueBookFilter[l].countDay+"</td>")+'<td style="width: 50px"><button id=viewBtnEmployeeBook-'+t.issueBookFilter[l].idIssue+' onClick="editRegistrationBook();" class="viewBtnEmployeeBook">view</button></td>',n+='<td style="width: 50px"></td>';else if(r>10){n=(n=n+'<td style="text-align: center; width: 50px; color: #fff; background-color: rgb(232, 95, 76);" class="garientCountDay">'+t.issueBookFilter[l].countDay+"</td>")+'<td style="width: 50px"><button id=viewBtnEmployeeBook-'+t.issueBookFilter[l].idIssue+' onClick="editRegistrationBook();" class="viewBtnEmployeeBook">view</button></td>';var c=a+"/"+(d=t.issueBookFilter[l].dateOn)+"/"+t.issueBookFilter[l].idBook+"/"+t.issueBookFilter[l].idEmployee+"/"+t.issueBookFilter[l].nameBook+"/"+t.issueBookFilter[l].nameEmployee+"/"+t.issueBookFilter[l].statusReturn;n=n+'<td style="width: 50px"><button id=emailBtnEmployeeBook-'+t.issueBookFilter[l].idEmployee+' onClick="sendEmail();" value="'+c+'" class="emailBtnEmployeeBook">email</button></td>'}else r<10&&(n=(n=n+'<td style="text-align: center; width: 50px;">'+r+"</td>")+'<td style="width: 50px"><button id=viewBtnEmployeeBook-'+t.issueBookFilter[l].idIssue+' onClick="editRegistrationBook();" class="viewBtnEmployeeBook">view</button></td>',n+='<td style="width: 50px"></td>')}var u='<table id="tabResponse" class="tableRegistration"><tr><td colspan="2" style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">*</td><td colspan="2" style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Employee</td><td colspan="2" style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Book</td><td colspan="3" style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Data registration</td><td colspan="2" style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Action</td></tr><tr><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">#</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">S</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Id</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Name</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Id</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Brief</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Issue</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Return</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Day</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">View</td><td style="text-align: center; background: #39b54a; color: #fff; border-color: #fff;">Email</td></tr>'+n+"</tr></table>";document.getElementById("panelTableRegistrationBook").innerHTML=u}})}function clearRegRegistrationFilter(){loadRegistrationBook(),document.getElementById("searchRegRegistration").value=""}function cancelRegRegistrationFilter(){showInformationPanel("The registration of the issuance of the book wasn't saved."),document.getElementById("panelAddRegRegistration").style.display="none"}function saveRegRegistrationFilter(e){var t=document.getElementById("selectEmployeeRegInput").value,o=document.querySelector("#employeeRegPanel option[value='"+t+"']").getAttribute("data-status"),n=(document.getElementById("selectEmployeeRegInput").value,document.getElementById("selectBookRegInput").value),l=document.querySelector("#bookRegPanel option[value='"+n+"']").getAttribute("data-status"),d=(document.getElementById("selectBookRegInput").value,getUnixTimeStamp(document.getElementById("selectRegDateOn").value));getUnixTimeStamp(document.getElementById("selectRegDateOff").value);if("status: new issue"==document.getElementById("lblStatusRegRegistration").innerHTML){var a={action:"createEmployeeBook",idEmployee:o,idBook:l,dateOn:d,dateOff:0,status:"false"};$.ajax({url:urlServerBookEmployee,dataType:"json",data:a,error:function(e){loadRegistrationBook()},success:function(e){loadRegistrationBook()}}),loadRegistrationBook(),showInformationPanel("The registration of the issuance of the book was saved.")}else{var i=getUnixTimeStamp(document.getElementById("selectRegDateOff").value),s={action:"updateBook",idIssue:idEditIssue,dateReturn:i,status:"true"};$.ajax({url:urlServerBookEmployee,dataType:"json",data:s,error:function(e){loadRegistrationBook()},success:function(e){loadRegistrationBook()}}),loadRegistrationBook(),showInformationPanel("The registration of the issuance of the book was saved.")}document.getElementById("panelAddRegRegistration").style.display="none"}function getUnixTimeStamp(e){return date2timestamp(e.split("-")[0],e.split("-")[1],e.split("-")[2],0,0,0)}function getListEmployee(){loadWorkPanelHide(),loadEmployeePanel(),document.getElementById("addDtn").style.display="none",$.ajax({url:urlServerEmployee,dataType:"json",data:{action:"readAllEmployee"},error:function(e){},success:function(e){document.getElementById("blockTable").innerHTML="List of employes.";var t=JSON.parse(JSON.stringify(e)),o=Object.keys(t.employee).length;document.getElementById("respServlet").innerHTML="";for(var n="",l=0;l<o;l++){var d=t.employee[l].dateBirth,a=unixtimetodate(d);n=(n=(n=(n=(n=n+'<tr><td style="text-align: right;">'+t.employee[l].id+"</td>")+"<td>"+t.employee[l].name+"</td>")+'<td style="text-align: right;">'+a+"</td>")+"<td>"+t.employee[l].email+"</td>")+'<td style="width: 50px"><button id=deleteBtn-'+t.employee[l].id+' onClick="deleeEmployById();" class="deleteBtnRow">delete</button></td>'}var i='<table id="tabResponse" class="tabResponse"><tr><td style="text-align: center; background: #39b54a; width: 50px; color: #fff">Id</td><td style="text-align: center;  background: #39b54a;  color: #fff">Name</td><td style="text-align: center;  background: #39b54a;  color: #fff; width: 90px;">Date of birth</td><td style="text-align: center;  background: #39b54a; width: 250px; color: #fff">Email</td><td  style="text-align: center;  background: #39b54a;  color: #fff" colspan="3" >Action</td></tr><tr>'+n+"</tr></table>";document.getElementById("respServlet").innerHTML=i}})}function unixtimetodate(e){var t=e;return moment.unix(t).format("DD.MM.YYYY")}function showListRentingBookEmployee(){var e={action:"selectBookRentEmployee",idEmployee:userIdRenting};console.log(e),$.ajax({url:urlServerBookEmployee,dataType:"json",data:e,error:function(e){},success:function(e){var t=JSON.parse(JSON.stringify(e)),o=Object.keys(t.allRentBooksEmployee).length;console.log(t);for(var n="",l=0;l<o;l++)n=(n=(n=(n=n+'<tr><td style="text-align: right;">'+t.allRentBooksEmployee[l].idRent+"</td>")+'<td style="text-align: right;">'+unixtimetodate(t.allRentBooksEmployee[l].dateOnRenting)+"</td>")+'<td style="text-align: left;">'+t.allRentBooksEmployee[l].nameBook+"</td>")+'<td style="width: 50px"><button id=Rent-'+t.allRentBooksEmployee[l].idRent+' onClick="deleteRentFromEmployeeRentingPanel();" class="deleteBtnRow">Delete</button></td>';var d='<table id="tabResponse" class="tabResponse"><tr><td style="text-align: center; background: #39b54a; color: #fff; width: 45px;">Id</td><td style="text-align: center; background: #39b54a; color: #fff; width: 80px;">Date</td><td style="text-align: center; background: #39b54a; color: #fff;">Book</td><td style="text-align: center; background: #39b54a; color: #fff;">Action</td></tr><tr>'+n+"</tr></table>";document.getElementById("tablePanelRentingList").innerHTML=d}});try{showPanelListRentingPanel()}catch(e){}}function deleteRentFromEmployeeRentingPanel(){var e=event.target.id,t=(e.split("-")[0],{action:"deleteRentingBookEmployee",idRent:e.split("-")[1]});console.log(t),$.ajax({url:urlServerBookEmployee,dataType:"json",type:"GET",data:t,error:function(e){showInformationPanel("The renting book has been deleted.")},success:function(e){showInformationPanel("The renting book has been deleted.")}}),showInformationPanel("The renting book has been deleted."),showListRentingBookEmployee()}function showFormPanelAccount(){document.getElementById("accountPanel").style.display="block";var e={action:"selectAccountEmployeeId",idEmployee:userIdRenting};$.ajax({url:urlServerBook,dataType:"json",type:"GET",data:e,error:function(e){},success:function(e){var t=JSON.parse(JSON.stringify(e)),o=t[0].photoEmployee;""==o?(document.getElementById("backgroundAccountImage").src="img/NoPhotoEmployee.png",document.getElementById("accountPhotoImage").src="img/NoPhotoEmployee.png",document.getElementById("userImg").src="img/NoPhotoEmployee.png"):(document.getElementById("backgroundAccountImage").src=o,document.getElementById("accountPhotoImage").src=o,document.getElementById("userImg").src=o),document.getElementById("fullNameAccountField").value=t[0].name,document.getElementById("emailAccountField").value=t[0].email,document.getElementById("dateBirthAccountField").value=unixtimetodateDateBirth(t[0].dateBirth),document.getElementById("tellAccountField").value=t[0].tellNumber}})}function loadImagePhotoAccount(){var e=document.getElementById("accountPhotoImage"),t=document.getElementById("backgroundAccountImage"),o=(document.getElementById("userImg"),document.getElementById("loadPhotoAccount").files[0]),n=new FileReader;n.onloadend=function(){e.src=n.result,t.src=n.result,getEncodephoto=n.result,n.result},o?n.readAsDataURL(o):(e.src="",t.src="")}function cancelAccountPanel(){document.getElementById("accountPanel").style.display="none",showInformationPanel("The account information hasn't been saved.")}function saveAccountPanel(){var e=userIdRenting,t=document.getElementById("fullNameAccountField").value,o=document.getElementById("dateBirthAccountField").value,n=document.getElementById("tellAccountField").value,l=document.getElementById("emailAccountField").value,d=document.getElementById("accountPhotoImage").src,a={action:"updateEmployee",idEmployee:e,nameEmployee:t,dateBirthEmployee:getUnixTimeStamp(o),emailEmployee:l,photoEmployee:d,tellEmployee:n};$.ajax({url:urlServerBook,dataType:"json",type:"POST",data:a,error:function(e){},success:function(e){}}),showInformationPanel("The account information has been saved."),document.getElementById("accountPanel").style.display="none"}function createRenting(){var e=event.target.id,t=(e.split("-")[0],e.split("-")[1]),o=Math.round((new Date).getTime()/1e3),n={action:"createRent",idBook:t,idEmployee:userIdRenting,dateOn:o,status:"false"};$.ajax({url:urlServerBook,dataType:"json",data:n,error:function(e){},success:function(e){}}),showInformationPanel("The order of the book was successfully issued.")}function getUserEntranse(){var e=document.getElementById("userField").value,t=document.getElementById("passField").value;if(""==e&&""==t)showInformationPanel("Please, insert loggin and password!");else{var o={action:"entranceUser",loggin:e,password:t};$.ajax({url:urlServerEmployee,dataType:"json",data:o,error:function(e){},success:function(o){document.cookie="strLoggin="+e,document.cookie="strPassword="+t;try{var n=o.entrance[0].satatusAdmin;if(statusAdmin=o.entrance[0].satatusAdmin,userIdRenting=o.entrance[0].id,"true"==n)loadAdminPanel(),document.getElementById("helloLbl").innerHTML="Hello, "+o.entrance[0].userLoggin+".",showFormPanelAccount(),document.getElementById("accountPanel").style.display="none";else if("false"==n){loadUserPanel(),document.getElementById("helloLbl").innerHTML="Hello, "+o.entrance[0].userLoggin+".",showFormPanelAccount(),document.getElementById("accountPanel").style.display="none"}else if("lib"==n){loadWorkPanel(),document.getElementById("helloLbl").innerHTML="Hello, "+o.entrance[0].userLoggin+".",document.getElementById("userImg").src="img/NoPhotoEmployee.png",document.getElementById("formLoggin").style.display="none",document.getElementById("closeButton").style.display="block";var l=document.getElementById("tablesPanelControl");l.style.width="95%",l.style.left="2%"}else alert("Error in login or password!"),showFormPanelAccount(),document.getElementById("accountPanel").style.display="none"}catch(e){document.getElementById("helloLbl").innerHTML="Incorrect login or password!"}}})}}function loadAdminPanel(){document.getElementById("helloLbl").innerHTML="Hello, "+login_constant+".",document.getElementById("imgButton1").style.display="block",document.getElementById("imgButton2").style.display="block",document.getElementById("imgButton3").style.display="block",document.getElementById("imgButton4").style.display="block",document.getElementById("formLoggin").style.display="none",document.getElementById("closeButton").style.display="block",document.getElementById("regButton").style.display="none",document.getElementById("tablesPanel").style.display="block",document.getElementById("rentBtn").style.display="block",document.getElementById("rentListBtn").style.display="none",document.getElementById("lblCountRent").style.display="block",document.getElementById("accountBtn").style.display="block"}function loadUserPanel(){document.getElementById("reportDtn").style.visibility="hidden",document.getElementById("addDtn").style.visibility="hidden",document.getElementById("imgButton1").style.visibility="hidden",document.getElementById("imgButton2").style.visibility="hidden",document.getElementById("imgButton3").style.visibility="hidden",document.getElementById("imgButton4").style.visibility="hidden",document.getElementById("tablesPanel").style.width="94%",document.getElementById("tablesPanel").style.left="3%",document.getElementById("helloLbl").innerHTML="Hello, "+login_constant+".",document.getElementById("imgButton1").style.display="block",document.getElementById("formLoggin").style.display="none",document.getElementById("closeButton").style.display="block",document.getElementById("tablesPanel").style.display="block",document.getElementById("rentBtn").style.display="none",document.getElementById("rentListBtn").style.display="block",document.getElementById("lblCountRent").style.display="none",document.getElementById("accountBtn").style.display="block",document.getElementById("uploadInfoBtn").style.display="none",loadUserTable()}function loadUserTable(){$.ajax({url:urlServerBook,dataType:"json",data:{action:"readAllBooks"},error:function(e){},success:function(e){document.getElementById("blockTable").innerHTML="List of books.";var t=JSON.parse(JSON.stringify(e)),o=Object.keys(t.books).length;document.getElementById("respServlet").innerHTML="";for(var n="",l=0;l<o;l++){$("#autiorList").append('<option value="'+t.books[l].author+'" selected="selected">'+t.books[l].author+"</option>");var d=d+t.books[l].brief;n=(n=(n=(n=(n=(n=n+'<tr><td style="text-align: right;">'+t.books[l].id+"</td>")+"<td>"+t.books[l].brief+"</td>")+'<td style="text-align: right;">'+t.books[l].publishYear+"</td>")+"<td>"+t.books[l].author+"</td>")+'<td style="width: 50px"><button id=viewBtn-'+t.books[l].id+' onClick="viewBookInfo();" class="viewBtnRow">view</button></td>')+'<td style="width: 50px"><button id=viewBtn-'+t.books[l].id+"-"+userIdRenting+' onClick="createRenting();" class="viewBtnRow">rent</button></td>'}var a='<table id="tabResponse" class="tabResponse"><tr><td style="text-align: center; background: #39b54a; color: #fff">Id</td><td style="text-align: center;  background: #39b54a;  color: #fff">Brief</td><td style="text-align: center;  background: #39b54a;  color: #fff; width: 30px;">Publish year</td><td style="text-align: center;  background: #39b54a;  color: #fff">Author</td><td style="text-align: center;  background: #39b54a;  color: #fff">View</td><td style="text-align: center;  background: #39b54a;  color: #fff">Rent</td>'+n+"</tr></table>";document.getElementById("respServlet").innerHTML=a}})}function deleteCookie(e){document.cookie=e+"="}function reloadPage(){deleteCookie("strLoggin"),deleteCookie("strPassword"),location.reload()}function cancelRegistration(){document.getElementById("formRegistration").style.display="none"}function clerInputsRegistration(){document.getElementById("inputLoginRegistrationForm").value,document.getElementById("inputPasswordRegistrationForm").value,document.getElementById("inputFullnameRegistrationForm").value,document.getElementById("inputEmailRegistrationForm").value,document.getElementById("inputDateBirthRegistrationForm").value,document.getElementById("inputCaptchaRegistrationForm").value}function showRegistration(){clerInputsRegistration();var e=getRandomArbitary(1,1e3);intChaptcha=e,document.getElementById("labelcaptchaRegistrationForm").innerHTML="Please, insert this "+e+" in ",document.getElementById("formRegistration").style.display="block"}function saveRegistration(e){var t=document.getElementById("inputLoginRegistrationForm").value,o=document.getElementById("inputPasswordRegistrationForm").value,n=document.getElementById("inputFullnameRegistrationForm").value,l=document.getElementById("inputEmailRegistrationForm").value,d=document.getElementById("inputDateBirthRegistrationForm").value,a=date2timestamp(d.split("-")[0],d.split("-")[1],d.split("-")[2],0,0,0),i=document.getElementById("inputCaptchaRegistrationForm").value;if(""==t||""==o||""==n||""==l||""==i||isNaN(a))showInformationPanel("Save failed. Check the user registration data entered and try again."),isNaN(a)?document.getElementById("inputDateBirthRegistrationForm").style.background="#ffad99":document.getElementById("inputDateBirthRegistrationForm").style.background="#fff";else{var s={action:"createEmployee",login:t,password:o,fullName:n,email:l,dateBirth:a,statusAdmin:"false"};(i=intChaptcha)&&($.ajax({url:urlServerEmployee,dataType:"json",type:"POST",data:s,error:function(e){},success:function(e){}}),document.getElementById("formRegistration").style.display="none"),showInformationPanel("New user successfully registered."),document.getElementById("inputDateBirthRegistrationForm").style.background="#fff"}}function getRandomArbitary(e,t){return Math.floor(Math.random()*(t-e))+e}